{"ast":null,"code":"var _jsxFileName = \"/Users/francesson/reorganize/channel-list-app/src/components/MiningView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MiningView = ({\n  combinationHeaders,\n  loading,\n  error,\n  testMode,\n  onPatternSelect\n}) => {\n  _s();\n  const [miningData, setMiningData] = useState(null);\n  const [expandedNodes, setExpandedNodes] = useState({});\n  const [highlightedPattern, setHighlightedPattern] = useState(null);\n  const [algorithm, setAlgorithm] = useState('fpgrowth'); // Only use FP-Growth\n  const [minSupport, setMinSupport] = useState(0.01); // Changed to 1% default\n  const [minConfidence, setMinConfidence] = useState(0.01); // Changed to 1% default\n  const [maxDepth, setMaxDepth] = useState(100); // No practical limit\n  const [currentPath, setCurrentPath] = useState([]);\n  const [showSettings, setShowSettings] = useState(false);\n  const [ignoredNodes, setIgnoredNodes] = useState([]); // 배열로 변경\n  const svgRef = useRef(null);\n\n  // 콘솔에 prop 확인 로그\n  useEffect(() => {\n    console.log('onPatternSelect prop:', onPatternSelect);\n    console.log('combinationHeaders:', combinationHeaders);\n  }, [onPatternSelect, combinationHeaders]);\n\n  // 메모이즈된 무시 노드 확인 함수\n  const isNodeIgnored = useCallback(nodeId => {\n    return ignoredNodes.includes(nodeId);\n  }, [ignoredNodes]);\n\n  // 데이터가 변경될 때마다 마이닝 실행\n  useEffect(() => {\n    if (combinationHeaders && combinationHeaders.length > 0) {\n      generateMiningData(combinationHeaders, algorithm);\n    } else {\n      setMiningData(null);\n    }\n  }, [combinationHeaders, algorithm, minSupport, minConfidence, maxDepth]);\n\n  // Effect to update SVG visualization when mining data changes\n  useEffect(() => {\n    if (miningData && svgRef.current) {\n      console.log('Rendering tree, ignored nodes:', ignoredNodes);\n      renderMiningTree();\n    }\n  }, [miningData, expandedNodes, highlightedPattern, ignoredNodes]);\n\n  // Function to render a unified hierarchical tree visualization\n  const renderMiningTree = () => {\n    if (!svgRef.current || !miningData) return;\n    const svg = svgRef.current;\n    // Clear previous content\n    while (svg.firstChild) {\n      svg.removeChild(svg.firstChild);\n    }\n    const CONTAINER_WIDTH = svg.clientWidth || 300;\n    const NODE_HEIGHT = 32; // Reduced height\n    const NODE_SPACING = 10; // Reduced spacing\n    const LEVEL_INDENT = 35; // Increased indent for better hierarchy visualization\n\n    // Calculate tree structure based on expanded nodes\n    const treeNodes = [];\n    let yOffset = 20; // Initial top padding\n\n    // Recursive function to add nodes\n    const addNodesRecursively = (nodes, parentId, level, isVisible) => {\n      if (!nodes || nodes.length === 0) return;\n\n      // Sort nodes by support for better visualization\n      const sortedNodes = [...nodes].sort((a, b) => b.support - a.support);\n      sortedNodes.forEach(node => {\n        // Skip if parent is collapsed or node is ignored\n        if (!isVisible || isNodeIgnored(node.id)) return;\n        const isExpanded = expandedNodes[node.id] || false;\n\n        // Add current node\n        treeNodes.push({\n          ...node,\n          level,\n          x: 10 + level * LEVEL_INDENT,\n          y: yOffset,\n          isExpanded,\n          parent: parentId\n        });\n\n        // Increment y-position for next node\n        yOffset += NODE_HEIGHT + NODE_SPACING;\n\n        // Process children if any\n        if (node.children && node.children.length > 0) {\n          addNodesRecursively(node.children, node.id, level + 1, isVisible && isExpanded);\n        }\n      });\n    };\n\n    // Add all nodes from mining data\n    const sortedTopNodes = [...miningData].sort((a, b) => b.support - a.support);\n    addNodesRecursively(sortedTopNodes, null, 0, true);\n\n    // Set SVG height based on content\n    svg.setAttribute('height', `${yOffset + 20}px`);\n\n    // Create a container for the SVG elements\n    const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    container.setAttribute('class', 'svg-container');\n    svg.appendChild(container);\n\n    // Draw connections between nodes\n    treeNodes.forEach(node => {\n      if (node.parent) {\n        const parent = treeNodes.find(n => n.id === node.parent);\n        if (parent) {\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          const startX = parent.x + 8;\n          const startY = parent.y + NODE_HEIGHT / 2;\n          const endX = node.x;\n          const endY = node.y + NODE_HEIGHT / 2;\n\n          // Create an elbow connector\n          const d = `M ${startX} ${startY} L ${startX + 5} ${startY} L ${startX + 5} ${endY} L ${endX} ${endY}`;\n          path.setAttribute('d', d);\n          path.setAttribute('fill', 'none');\n\n          // Highlight path if node is part of highlighted pattern\n          const isHighlighted = highlightedPattern && highlightedPattern.includes(node.id) && highlightedPattern.includes(parent.id);\n\n          // Improved highlight styling\n          if (isHighlighted) {\n            path.setAttribute('stroke', '#3498db'); // More vibrant highlight color\n            path.setAttribute('stroke-width', '2');\n            path.setAttribute('stroke-dasharray', '0'); // Solid line\n          } else {\n            path.setAttribute('stroke', '#eee');\n            path.setAttribute('stroke-width', '1');\n          }\n          container.appendChild(path);\n        }\n      }\n    });\n\n    // Draw nodes\n    treeNodes.forEach(node => {\n      const nodeGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      nodeGroup.setAttribute('transform', `translate(${node.x}, ${node.y})`);\n      nodeGroup.setAttribute('data-node-id', node.id);\n      nodeGroup.setAttribute('class', 'tree-node');\n\n      // Node background (rectangle)\n      const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('class', 'node-rect');\n\n      // Calculate width based on content and level\n      const baseWidth = CONTAINER_WIDTH - node.x - 30;\n      const width = Math.min(baseWidth, 240);\n      rect.setAttribute('width', width);\n      rect.setAttribute('height', NODE_HEIGHT);\n      rect.setAttribute('rx', 4); // Smaller corner radius\n\n      // Determine fill color based on level and highlight state\n      const isHighlighted = highlightedPattern && highlightedPattern.includes(node.id);\n\n      // Use a more monotone color scheme\n      let fillColor = node.level === 0 ? '#f8f9fa' : '#ffffff';\n      if (isHighlighted) {\n        fillColor = '#e6f2fa'; // Lighter blue tint for highlighted nodes\n      }\n      rect.setAttribute('fill', fillColor);\n      rect.setAttribute('stroke', isHighlighted ? '#3498db' : '#ddd'); // Blue for highlight\n      rect.setAttribute('stroke-width', isHighlighted ? '1.5' : '1');\n\n      // Make nodes interactive\n      nodeGroup.style.cursor = 'pointer';\n\n      // 노드 클릭을 위한 데이터 속성 추가\n      nodeGroup.setAttribute('data-action', 'select-node');\n\n      // Toggle expansion only for nodes with children\n      if (node.children && node.children.length > 0) {\n        const indicator = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        indicator.textContent = node.isExpanded ? '−' : '+';\n        indicator.setAttribute('x', width - 15);\n        indicator.setAttribute('y', NODE_HEIGHT / 2 + 4);\n        indicator.setAttribute('font-size', '13px');\n        indicator.setAttribute('font-weight', 'bold');\n        indicator.setAttribute('fill', '#888');\n        indicator.setAttribute('class', 'expand-indicator');\n        indicator.setAttribute('data-action', 'expand');\n        indicator.setAttribute('data-node-id', node.id);\n        nodeGroup.appendChild(indicator);\n      }\n\n      // Add X button for ignoring nodes\n      // background circle\n      const ignoreButtonBg = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n      ignoreButtonBg.setAttribute('cx', width - 35);\n      ignoreButtonBg.setAttribute('cy', NODE_HEIGHT / 2);\n      ignoreButtonBg.setAttribute('r', 8);\n      ignoreButtonBg.setAttribute('fill', '#f5f5f5');\n      ignoreButtonBg.setAttribute('stroke', '#ddd');\n      ignoreButtonBg.setAttribute('stroke-width', '1');\n      ignoreButtonBg.setAttribute('class', 'ignore-button-bg');\n      ignoreButtonBg.setAttribute('data-action', 'ignore');\n      ignoreButtonBg.setAttribute('data-node-id', node.id);\n      ignoreButtonBg.style.cursor = 'pointer';\n\n      // X mark\n      const ignoreButton = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      ignoreButton.textContent = '✕';\n      ignoreButton.setAttribute('x', width - 35);\n      ignoreButton.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      ignoreButton.setAttribute('font-size', '11px');\n      ignoreButton.setAttribute('text-anchor', 'middle');\n      ignoreButton.setAttribute('fill', '#999');\n      ignoreButton.setAttribute('class', 'ignore-button');\n      ignoreButton.setAttribute('data-action', 'ignore');\n      ignoreButton.setAttribute('data-node-id', node.id);\n      ignoreButton.style.cursor = 'pointer';\n\n      // Node label\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('x', 8);\n      text.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      text.setAttribute('font-size', node.level === 0 ? '13px' : '12px');\n      text.setAttribute('font-weight', node.level === 0 ? 'bold' : 'normal');\n      text.setAttribute('fill', '#333');\n      text.setAttribute('class', 'node-text');\n\n      // Make sure text fits\n      const maxTextWidth = width - 60;\n      let displayText = node.name;\n      if (displayText.length > 25) {\n        displayText = displayText.substring(0, 23) + '...';\n      }\n      text.textContent = displayText;\n\n      // Support count\n      const supportText = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      supportText.setAttribute('x', width - 55);\n      supportText.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      supportText.setAttribute('font-size', '12px');\n      supportText.setAttribute('text-anchor', 'end');\n      supportText.setAttribute('fill', '#555');\n      supportText.setAttribute('font-weight', node.level === 0 ? 'bold' : 'normal');\n      supportText.setAttribute('class', 'support-text');\n      supportText.textContent = node.support;\n      nodeGroup.appendChild(rect);\n      nodeGroup.appendChild(ignoreButtonBg);\n      nodeGroup.appendChild(ignoreButton);\n      nodeGroup.appendChild(text);\n      nodeGroup.appendChild(supportText);\n      container.appendChild(nodeGroup);\n\n      // Hover effect for highlighting patterns\n      nodeGroup.addEventListener('mouseenter', () => {\n        // Find all ancestors and highlight the path\n        const pattern = [node.id];\n        let currentNode = node;\n        while (currentNode.parent) {\n          pattern.push(currentNode.parent);\n          currentNode = treeNodes.find(n => n.id === currentNode.parent);\n          if (!currentNode) break;\n        }\n        setHighlightedPattern(pattern);\n\n        // Extract only the item names (not the full IDs) for the path display\n        const simplifiedPath = [];\n        pattern.forEach(id => {\n          const parts = id.split('-');\n          const lastPart = parts[parts.length - 1];\n          simplifiedPath.unshift(lastPart);\n        });\n        setCurrentPath(simplifiedPath);\n      });\n      nodeGroup.addEventListener('mouseleave', () => {\n        setHighlightedPattern(null);\n        // Don't clear current path - keep it visible\n      });\n    });\n\n    // 전체 SVG에 이벤트 리스너 추가 (이벤트 위임)\n    svg.addEventListener('click', handleSvgClick);\n  };\n\n  // SVG 클릭 이벤트 핸들러 (이벤트 위임)\n  const handleSvgClick = e => {\n    const target = e.target;\n    const action = target.getAttribute('data-action') || (target.parentNode ? target.parentNode.getAttribute('data-action') : null);\n    const nodeId = target.getAttribute('data-node-id') || (target.parentNode ? target.parentNode.getAttribute('data-node-id') : null);\n    console.log('SVG click:', action, nodeId, target.tagName);\n    if (!action || !nodeId) return;\n    if (action === 'ignore') {\n      console.log('Ignoring node from event delegation:', nodeId);\n      e.stopPropagation();\n      ignoreNode(nodeId);\n    } else if (action === 'expand') {\n      console.log('Expanding node from event delegation:', nodeId);\n      e.stopPropagation();\n      toggleNode(nodeId);\n    } else if (action === 'select-node') {\n      console.log('Selecting node from event delegation:', nodeId);\n      // Find the node in our data\n      const findNode = (nodes, id) => {\n        for (const node of nodes) {\n          if (node.id === id) return node;\n          if (node.children && node.children.length > 0) {\n            const found = findNode(node.children, id);\n            if (found) return found;\n          }\n        }\n        return null;\n      };\n      const selectedNode = findNode(miningData, nodeId);\n      if (selectedNode) {\n        sendPatternToAPI(selectedNode);\n      }\n    }\n  };\n\n  // 컴포넌트 unmount 시 이벤트 리스너 제거\n  useEffect(() => {\n    return () => {\n      if (svgRef.current) {\n        svgRef.current.removeEventListener('click', handleSvgClick);\n      }\n    };\n  }, []);\n\n  // Function to generate mining data using Eclat or FP Growth algorithm\n  const generateMiningData = (combinationData, algo = 'eclat') => {\n    if (!combinationData || combinationData.length === 0) {\n      setMiningData(null);\n      return;\n    }\n\n    // Step 1: Create transactions from header combinations\n    const transactions = combinationData.filter(item => item.header_group).map(item => item.header_group.split('|'));\n\n    // Step 2: Count item frequencies for both algorithms\n    const itemCounts = {};\n    const totalTransactions = transactions.length;\n    transactions.forEach(transaction => {\n      transaction.forEach(item => {\n        itemCounts[item] = (itemCounts[item] || 0) + 1;\n      });\n    });\n\n    // Calculate minimum support threshold - use absolute minimum of 2\n    const minSupportCount = Math.max(2, Math.floor(totalTransactions * minSupport));\n\n    // Get frequent items sorted by frequency\n    const frequentItems = Object.keys(itemCounts).filter(item => itemCounts[item] >= minSupportCount).sort((a, b) => itemCounts[b] - itemCounts[a]);\n\n    // Create single tree structure with most frequent item as root\n    if (frequentItems.length === 0) {\n      setMiningData([]);\n      return;\n    }\n\n    // Build a single hierarchical tree structure instead of multiple independent trees\n    if (algo === 'eclat') {\n      // ECLAT ALGORITHM IMPLEMENTATION\n\n      // Step 1: Build vertical tid-lists (transaction ID lists) for each item\n      const tidLists = {};\n      frequentItems.forEach(item => {\n        tidLists[item] = new Set();\n      });\n      transactions.forEach((transaction, tid) => {\n        transaction.forEach(item => {\n          if (frequentItems.includes(item)) {\n            tidLists[item].add(tid);\n          }\n        });\n      });\n\n      // Create a single root node representing the most frequent item\n      const rootItem = frequentItems[0];\n      const rootSupport = tidLists[rootItem].size;\n      const singleTreeRoot = {\n        id: rootItem,\n        name: rootItem,\n        support: rootSupport,\n        confidence: rootSupport / totalTransactions,\n        children: []\n      };\n\n      // Build a tree structure following the frequency order of items\n      const buildOrderedTree = (currentNode, currentPrefix, currentTids, level) => {\n        if (level >= maxDepth) return;\n\n        // Find index of the current node's item in the frequentItems list\n        const currentItemIndex = frequentItems.indexOf(currentNode.name);\n\n        // Check for next items in the frequency order\n        for (let i = currentItemIndex + 1; i < frequentItems.length; i++) {\n          const nextItem = frequentItems[i];\n          const nextItemTids = tidLists[nextItem];\n\n          // Calculate intersection\n          const intersection = new Set([...currentTids].filter(tid => nextItemTids.has(tid)));\n          const support = intersection.size;\n\n          // Add to tree if support is sufficient\n          if (support >= Math.max(2, minSupportCount)) {\n            const newPrefix = [...currentPrefix, nextItem];\n            const confidence = support / currentTids.size;\n\n            // Add only if confidence is sufficient (reduced for deeper patterns)\n            if (confidence >= (level > 2 ? minConfidence / 2 : minConfidence)) {\n              const childNode = {\n                id: `${currentNode.id}-${nextItem}`,\n                name: nextItem,\n                support: support,\n                confidence: confidence,\n                children: []\n              };\n              currentNode.children.push(childNode);\n\n              // Recursively build tree with this child as new parent\n              buildOrderedTree(childNode, newPrefix, intersection, level + 1);\n            }\n          }\n        }\n      };\n\n      // Start building the tree from the root\n      buildOrderedTree(singleTreeRoot, [rootItem], tidLists[rootItem], 1);\n\n      // Initialize expanded nodes for visualization\n      const initialExpanded = {};\n      initialExpanded[rootItem] = true; // Expand root node\n\n      // Expand first level children\n      if (singleTreeRoot.children && singleTreeRoot.children.length > 0) {\n        singleTreeRoot.children.slice(0, 5).forEach(child => {\n          initialExpanded[child.id] = true;\n\n          // Also expand first grandchild if available\n          if (child.children && child.children.length > 0) {\n            initialExpanded[child.children[0].id] = true;\n          }\n        });\n      }\n\n      // Set the result as a single-item array containing the root\n      setMiningData([singleTreeRoot]);\n      setExpandedNodes(initialExpanded);\n    } else {\n      // FP-GROWTH for a single hierarchical tree\n\n      // Step 3: Reorder transactions based on frequency\n      const orderedTransactions = transactions.map(transaction => {\n        return transaction.filter(item => frequentItems.includes(item)).sort((a, b) => itemCounts[b] - itemCounts[a]);\n      }).filter(transaction => transaction.length > 0);\n\n      // Create a single root node for the most frequent item\n      const rootItem = frequentItems[0];\n      const singleTreeRoot = {\n        id: rootItem,\n        name: rootItem,\n        support: itemCounts[rootItem],\n        confidence: itemCounts[rootItem] / totalTransactions,\n        children: []\n      };\n\n      // Create a mapping of patterns to their support count\n      const patternSupports = {};\n\n      // First pass - gather all pattern supports\n      orderedTransactions.forEach(transaction => {\n        if (transaction.length < 2) return;\n        for (let i = 0; i < transaction.length; i++) {\n          for (let j = i + 1; j < transaction.length; j++) {\n            const pattern = [transaction[i], transaction[j]];\n            const key = pattern.join('-');\n            patternSupports[key] = (patternSupports[key] || 0) + 1;\n          }\n        }\n      });\n\n      // Then build tree with those precomputed pattern supports\n      const buildOrderedFPTree = (currentNode, level) => {\n        if (level >= maxDepth) return;\n        const currentItemIndex = frequentItems.indexOf(currentNode.name);\n        for (let i = currentItemIndex + 1; i < frequentItems.length; i++) {\n          const nextItem = frequentItems[i];\n\n          // Check if the pair meets minimum support\n          const patternKey = [currentNode.name, nextItem].join('-');\n          const support = patternSupports[patternKey] || 0;\n          if (support >= Math.max(2, minSupportCount)) {\n            const confidence = support / itemCounts[currentNode.name];\n            if (confidence >= (level > 2 ? minConfidence / 2 : minConfidence)) {\n              const childNode = {\n                id: `${currentNode.id}-${nextItem}`,\n                name: nextItem,\n                support: support,\n                confidence: confidence,\n                children: []\n              };\n              currentNode.children.push(childNode);\n              buildOrderedFPTree(childNode, level + 1);\n            }\n          }\n        }\n      };\n\n      // Start building the tree from the root\n      buildOrderedFPTree(singleTreeRoot, 1);\n\n      // Initialize expanded nodes for visualization\n      const initialExpanded = {};\n      initialExpanded[rootItem] = true; // Expand root node\n\n      // Expand first level children\n      if (singleTreeRoot.children && singleTreeRoot.children.length > 0) {\n        singleTreeRoot.children.slice(0, 5).forEach(child => {\n          initialExpanded[child.id] = true;\n\n          // Also expand first grandchild if available\n          if (child.children && child.children.length > 0) {\n            initialExpanded[child.children[0].id] = true;\n          }\n        });\n      }\n\n      // Set the result as a single-item array containing the root\n      setMiningData([singleTreeRoot]);\n      setExpandedNodes(initialExpanded);\n    }\n  };\n\n  // Switch between algorithms\n  const switchAlgorithm = algo => {\n    setAlgorithm(algo);\n  };\n\n  // Change minimum support threshold\n  const handleSupportChange = e => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > 0 && value <= 1) {\n      setMinSupport(value);\n    }\n  };\n\n  // Change minimum confidence threshold\n  const handleConfidenceChange = e => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > 0 && value <= 1) {\n      setMinConfidence(value);\n    }\n  };\n\n  // Change maximum depth\n  const handleDepthChange = e => {\n    const value = parseInt(e.target.value);\n    if (!isNaN(value) && value > 0) {\n      setMaxDepth(value);\n    }\n  };\n\n  // Function to toggle node expansion\n  const toggleNode = nodeId => {\n    setExpandedNodes(prev => ({\n      ...prev,\n      [nodeId]: !prev[nodeId]\n    }));\n  };\n\n  // Toggle settings panel\n  const toggleSettings = () => {\n    setShowSettings(prev => !prev);\n  };\n\n  // Setup initial path on first render\n  useEffect(() => {\n    if (miningData && miningData.length > 0) {\n      // Set initial path to root node\n      const rootItem = miningData[0].name;\n      setCurrentPath([rootItem]);\n    }\n  }, [miningData]);\n\n  // Function to ignore a node\n  const ignoreNode = nodeId => {\n    if (!nodeId) {\n      console.warn('ignoreNode: nodeId is undefined');\n      return;\n    }\n    console.log('Ignoring node:', nodeId);\n\n    // 배열로 상태 업데이트 - React가 확실히 변경을 감지\n    setIgnoredNodes(prev => {\n      if (prev.includes(nodeId)) {\n        return prev; // 이미 무시 중이면 변경하지 않음\n      }\n      const newIgnored = [...prev, nodeId]; // 새 배열 생성\n      console.log('New ignored nodes:', newIgnored);\n\n      // 피드백 표시\n      const parts = nodeId.split('-');\n      const nodeName = parts[parts.length - 1];\n      showNotification(`'${nodeName}' 노드가 무시됨`, 'ignore');\n      return newIgnored;\n    });\n  };\n\n  // 알림 표시 함수\n  const showNotification = (message, type = 'normal') => {\n    // 이전 알림 제거\n    const existingNotifications = document.querySelectorAll('.pattern-notification');\n    existingNotifications.forEach(n => {\n      if (n.parentNode) {\n        n.parentNode.removeChild(n);\n      }\n    });\n\n    // 새 알림 생성\n    const notification = document.createElement('div');\n    notification.className = `pattern-notification ${type === 'ignore' ? 'ignore-notification' : ''}`;\n    notification.textContent = message;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      notification.style.opacity = '0';\n      setTimeout(() => {\n        if (notification.parentNode) {\n          document.body.removeChild(notification);\n        }\n      }, 300);\n    }, 2000);\n  };\n\n  // Function to send pattern to API\n  const sendPatternToAPI = node => {\n    console.log('sendPatternToAPI called with node:', node);\n    if (!node || !node.id) {\n      console.warn('Invalid node:', node);\n      return;\n    }\n\n    // 콜백 함수 확인\n    if (typeof onPatternSelect !== 'function') {\n      console.warn('onPatternSelect is not a function:', onPatternSelect);\n      showNotification('패턴 선택 핸들러가 없습니다', 'ignore');\n      return;\n    }\n\n    // Get full pattern from node to root\n    const getFullPattern = nodeId => {\n      const parts = nodeId.split('-');\n      return parts.filter(part => !ignoredNodes.includes(part));\n    };\n\n    // Get full pattern without ignored nodes\n    const pattern = getFullPattern(node.id);\n\n    // Join with delimiter\n    const patternString = pattern.join('|');\n    console.log('Pattern to send:', patternString);\n\n    // 패턴이 비어있는지 확인\n    if (!patternString) {\n      console.warn('Pattern is empty after filtering ignored nodes');\n      showNotification('선택한 패턴이 비어 있습니다', 'ignore');\n      return;\n    }\n\n    // 패턴 전송\n    try {\n      onPatternSelect(patternString);\n      console.log('Pattern sent successfully:', patternString);\n      showNotification(`패턴 선택됨: ${patternString}`);\n    } catch (error) {\n      console.error('Error sending pattern:', error);\n      showNotification('패턴 전송 중 오류 발생', 'ignore');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tab-content\",\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\uB85C\\uB529 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\uC5D0\\uB7EC: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 9\n    }, this) : combinationHeaders && combinationHeaders.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mining-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mining-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current-path\",\n          children: currentPath.map((item, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [index > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"path-separator\",\n              children: \"\\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: index === 0 ? \"path-root\" : \"\",\n              children: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 19\n            }, this)]\n          }, item + index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-actions\",\n          children: [ignoredNodes.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reset-button\",\n            onClick: () => {\n              console.log('Reset ignored nodes');\n              setIgnoredNodes([]);\n              showNotification('무시된 노드를 모두 초기화했습니다');\n            },\n            children: [\"\\uBB34\\uC2DC \\uCD08\\uAE30\\uD654 (\", ignoredNodes.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"settings-button\",\n            onClick: toggleSettings,\n            children: \"\\u2699\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 735,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mining-tree-container\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"mining-tree-svg\",\n          ref: svgRef,\n          width: \"100%\",\n          height: \"500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 11\n      }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD328\\uD134 \\uC124\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-button\",\n            onClick: toggleSettings,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"threshold-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-label\",\n              children: [(minSupport * 100).toFixed(0), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0.01\",\n              max: \"0.5\",\n              step: \"0.01\",\n              value: minSupport,\n              onChange: handleSupportChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 781,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-name\",\n              children: \"\\uCD5C\\uC18C \\uC9C0\\uC9C0\\uB3C4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 779,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"threshold-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-label\",\n              children: [(minConfidence * 100).toFixed(0), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 792,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0.01\",\n              max: \"0.9\",\n              step: \"0.01\",\n              value: minConfidence,\n              onChange: handleConfidenceChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 793,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-name\",\n              children: \"\\uCD5C\\uC18C \\uC2E0\\uB8B0\\uB3C4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"threshold-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-label\",\n              children: maxDepth\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 804,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"3\",\n              max: \"100\",\n              step: \"1\",\n              value: maxDepth,\n              onChange: handleDepthChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 805,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"threshold-name\",\n              children: \"\\uCD5C\\uB300 \\uD328\\uD134 \\uAE4A\\uC774\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"column-empty\",\n      children: testMode ? \"마이닝 데이터를 로딩 중입니다...\" : \"채널과 헤더를 선택하면 마이닝 결과가 표시됩니다.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 820,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .mining-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          position: relative;\n        }\n        \n        .mining-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 8px 10px;\n          background-color: #ffffff;\n          border-bottom: 1px solid #eee;\n          z-index: 2;\n          position: sticky;\n          top: 0;\n        }\n        \n        .current-path {\n          font-size: 13px;\n          color: #555;\n          flex-grow: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .path-separator {\n          margin: 0 6px;\n          color: #999;\n        }\n        \n        .path-root {\n          font-weight: bold;\n        }\n        \n        .header-actions {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .reset-button {\n          background: #f5f5f5;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          padding: 3px 8px;\n          font-size: 11px;\n          cursor: pointer;\n          color: #666;\n        }\n        \n        .reset-button:hover {\n          background: #eee;\n        }\n        \n        .settings-button {\n          background: none;\n          border: none;\n          font-size: 16px;\n          cursor: pointer;\n          padding: 4px 8px;\n          border-radius: 4px;\n          transition: background-color 0.2s;\n        }\n        \n        .settings-button:hover {\n          background-color: #f5f5f5;\n        }\n        \n        .mining-tree-container {\n          flex-grow: 1;\n          overflow: auto;\n          background-color: #ffffff;\n          padding: 0;\n          border: 1px solid #e0e0e0;\n          border-top: none;\n        }\n        \n        .settings-panel {\n          position: absolute;\n          top: 45px;\n          right: 10px;\n          width: 280px;\n          background: white;\n          border-radius: 6px;\n          box-shadow: 0 3px 10px rgba(0,0,0,0.15);\n          z-index: 10;\n          overflow: hidden;\n        }\n        \n        .settings-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 10px 15px;\n          background: #f8f9fa;\n          border-bottom: 1px solid #eee;\n        }\n        \n        .settings-header h3 {\n          margin: 0;\n          font-size: 14px;\n          color: #333;\n        }\n        \n        .close-button {\n          background: none;\n          border: none;\n          font-size: 18px;\n          cursor: pointer;\n          color: #666;\n        }\n        \n        .settings-content {\n          padding: 15px;\n        }\n        \n        .threshold-item {\n          margin-bottom: 15px;\n        }\n        \n        .threshold-label {\n          font-size: 13px;\n          font-weight: bold;\n          color: #333;\n          margin-bottom: 4px;\n          text-align: right;\n        }\n        \n        .threshold-name {\n          font-size: 12px;\n          color: #666;\n          margin-top: 2px;\n        }\n        \n        .threshold-item input {\n          width: 100%;\n        }\n        \n        .pattern-notification {\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          background: rgba(52, 152, 219, 0.9);\n          color: white;\n          padding: 10px 15px;\n          border-radius: 4px;\n          font-size: 12px;\n          z-index: 1000;\n          transition: opacity 0.3s;\n          opacity: 1;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n        }\n        \n        .ignore-notification {\n          background: rgba(231, 76, 60, 0.9);\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 728,\n    columnNumber: 5\n  }, this);\n};\n_s(MiningView, \"+GAX9tFfZoIMqu79LQFU94XOt0Y=\");\n_c = MiningView;\nexport default MiningView;\nvar _c;\n$RefreshReg$(_c, \"MiningView\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","MiningView","combinationHeaders","loading","error","testMode","onPatternSelect","_s","miningData","setMiningData","expandedNodes","setExpandedNodes","highlightedPattern","setHighlightedPattern","algorithm","setAlgorithm","minSupport","setMinSupport","minConfidence","setMinConfidence","maxDepth","setMaxDepth","currentPath","setCurrentPath","showSettings","setShowSettings","ignoredNodes","setIgnoredNodes","svgRef","console","log","isNodeIgnored","nodeId","includes","length","generateMiningData","current","renderMiningTree","svg","firstChild","removeChild","CONTAINER_WIDTH","clientWidth","NODE_HEIGHT","NODE_SPACING","LEVEL_INDENT","treeNodes","yOffset","addNodesRecursively","nodes","parentId","level","isVisible","sortedNodes","sort","a","b","support","forEach","node","id","isExpanded","push","x","y","parent","children","sortedTopNodes","setAttribute","container","document","createElementNS","appendChild","find","n","path","startX","startY","endX","endY","d","isHighlighted","nodeGroup","rect","baseWidth","width","Math","min","fillColor","style","cursor","indicator","textContent","ignoreButtonBg","ignoreButton","text","maxTextWidth","displayText","name","substring","supportText","addEventListener","pattern","currentNode","simplifiedPath","parts","split","lastPart","unshift","handleSvgClick","e","target","action","getAttribute","parentNode","tagName","stopPropagation","ignoreNode","toggleNode","findNode","found","selectedNode","sendPatternToAPI","removeEventListener","combinationData","algo","transactions","filter","item","header_group","map","itemCounts","totalTransactions","transaction","minSupportCount","max","floor","frequentItems","Object","keys","tidLists","Set","tid","add","rootItem","rootSupport","size","singleTreeRoot","confidence","buildOrderedTree","currentPrefix","currentTids","currentItemIndex","indexOf","i","nextItem","nextItemTids","intersection","has","newPrefix","childNode","initialExpanded","slice","child","orderedTransactions","patternSupports","j","key","join","buildOrderedFPTree","patternKey","switchAlgorithm","handleSupportChange","value","parseFloat","isNaN","handleConfidenceChange","handleDepthChange","parseInt","prev","toggleSettings","warn","newIgnored","nodeName","showNotification","message","type","existingNotifications","querySelectorAll","notification","createElement","className","body","setTimeout","opacity","getFullPattern","part","patternString","fileName","_jsxFileName","lineNumber","columnNumber","index","onClick","ref","height","toFixed","step","onChange","jsx","_c","$RefreshReg$"],"sources":["/Users/francesson/reorganize/channel-list-app/src/components/MiningView.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\n\nconst MiningView = ({ combinationHeaders, loading, error, testMode, onPatternSelect }) => {\n  const [miningData, setMiningData] = useState(null);\n  const [expandedNodes, setExpandedNodes] = useState({});\n  const [highlightedPattern, setHighlightedPattern] = useState(null);\n  const [algorithm, setAlgorithm] = useState('fpgrowth'); // Only use FP-Growth\n  const [minSupport, setMinSupport] = useState(0.01); // Changed to 1% default\n  const [minConfidence, setMinConfidence] = useState(0.01); // Changed to 1% default\n  const [maxDepth, setMaxDepth] = useState(100); // No practical limit\n  const [currentPath, setCurrentPath] = useState([]);\n  const [showSettings, setShowSettings] = useState(false);\n  const [ignoredNodes, setIgnoredNodes] = useState([]); // 배열로 변경\n  const svgRef = useRef(null);\n  \n  // 콘솔에 prop 확인 로그\n  useEffect(() => {\n    console.log('onPatternSelect prop:', onPatternSelect);\n    console.log('combinationHeaders:', combinationHeaders);\n  }, [onPatternSelect, combinationHeaders]);\n\n  // 메모이즈된 무시 노드 확인 함수\n  const isNodeIgnored = useCallback((nodeId) => {\n    return ignoredNodes.includes(nodeId);\n  }, [ignoredNodes]);\n\n  // 데이터가 변경될 때마다 마이닝 실행\n  useEffect(() => {\n    if (combinationHeaders && combinationHeaders.length > 0) {\n      generateMiningData(combinationHeaders, algorithm);\n    } else {\n      setMiningData(null);\n    }\n  }, [combinationHeaders, algorithm, minSupport, minConfidence, maxDepth]);\n\n  // Effect to update SVG visualization when mining data changes\n  useEffect(() => {\n    if (miningData && svgRef.current) {\n      console.log('Rendering tree, ignored nodes:', ignoredNodes);\n      renderMiningTree();\n    }\n  }, [miningData, expandedNodes, highlightedPattern, ignoredNodes]);\n\n  // Function to render a unified hierarchical tree visualization\n  const renderMiningTree = () => {\n    if (!svgRef.current || !miningData) return;\n\n    const svg = svgRef.current;\n    // Clear previous content\n    while (svg.firstChild) {\n      svg.removeChild(svg.firstChild);\n    }\n\n    const CONTAINER_WIDTH = svg.clientWidth || 300;\n    const NODE_HEIGHT = 32; // Reduced height\n    const NODE_SPACING = 10; // Reduced spacing\n    const LEVEL_INDENT = 35; // Increased indent for better hierarchy visualization\n    \n    // Calculate tree structure based on expanded nodes\n    const treeNodes = [];\n    let yOffset = 20;  // Initial top padding\n    \n    // Recursive function to add nodes\n    const addNodesRecursively = (nodes, parentId, level, isVisible) => {\n      if (!nodes || nodes.length === 0) return;\n      \n      // Sort nodes by support for better visualization\n      const sortedNodes = [...nodes].sort((a, b) => b.support - a.support);\n      \n      sortedNodes.forEach(node => {\n        // Skip if parent is collapsed or node is ignored\n        if (!isVisible || isNodeIgnored(node.id)) return;\n        \n        const isExpanded = expandedNodes[node.id] || false;\n        \n        // Add current node\n        treeNodes.push({\n          ...node,\n          level,\n          x: 10 + (level * LEVEL_INDENT),\n          y: yOffset,\n          isExpanded,\n          parent: parentId\n        });\n        \n        // Increment y-position for next node\n        yOffset += NODE_HEIGHT + NODE_SPACING;\n        \n        // Process children if any\n        if (node.children && node.children.length > 0) {\n          addNodesRecursively(node.children, node.id, level + 1, isVisible && isExpanded);\n        }\n      });\n    };\n    \n    // Add all nodes from mining data\n    const sortedTopNodes = [...miningData].sort((a, b) => b.support - a.support);\n    addNodesRecursively(sortedTopNodes, null, 0, true);\n    \n    // Set SVG height based on content\n    svg.setAttribute('height', `${yOffset + 20}px`);\n    \n    // Create a container for the SVG elements\n    const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    container.setAttribute('class', 'svg-container');\n    svg.appendChild(container);\n    \n    // Draw connections between nodes\n    treeNodes.forEach(node => {\n      if (node.parent) {\n        const parent = treeNodes.find(n => n.id === node.parent);\n        if (parent) {\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          \n          const startX = parent.x + 8;\n          const startY = parent.y + (NODE_HEIGHT / 2);\n          const endX = node.x;\n          const endY = node.y + (NODE_HEIGHT / 2);\n          \n          // Create an elbow connector\n          const d = `M ${startX} ${startY} L ${startX + 5} ${startY} L ${startX + 5} ${endY} L ${endX} ${endY}`;\n          \n          path.setAttribute('d', d);\n          path.setAttribute('fill', 'none');\n          \n          // Highlight path if node is part of highlighted pattern\n          const isHighlighted = highlightedPattern && (\n            highlightedPattern.includes(node.id) && highlightedPattern.includes(parent.id)\n          );\n          \n          // Improved highlight styling\n          if (isHighlighted) {\n            path.setAttribute('stroke', '#3498db'); // More vibrant highlight color\n            path.setAttribute('stroke-width', '2');\n            path.setAttribute('stroke-dasharray', '0'); // Solid line\n          } else {\n            path.setAttribute('stroke', '#eee');\n            path.setAttribute('stroke-width', '1');\n          }\n          \n          container.appendChild(path);\n        }\n      }\n    });\n    \n    // Draw nodes\n    treeNodes.forEach(node => {\n      const nodeGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      nodeGroup.setAttribute('transform', `translate(${node.x}, ${node.y})`);\n      nodeGroup.setAttribute('data-node-id', node.id);\n      nodeGroup.setAttribute('class', 'tree-node');\n      \n      // Node background (rectangle)\n      const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('class', 'node-rect');\n      \n      // Calculate width based on content and level\n      const baseWidth = CONTAINER_WIDTH - node.x - 30;\n      const width = Math.min(baseWidth, 240);\n      \n      rect.setAttribute('width', width);\n      rect.setAttribute('height', NODE_HEIGHT);\n      rect.setAttribute('rx', 4);  // Smaller corner radius\n      \n      // Determine fill color based on level and highlight state\n      const isHighlighted = highlightedPattern && highlightedPattern.includes(node.id);\n      \n      // Use a more monotone color scheme\n      let fillColor = node.level === 0 ? '#f8f9fa' : '#ffffff'; \n      \n      if (isHighlighted) {\n        fillColor = '#e6f2fa'; // Lighter blue tint for highlighted nodes\n      }\n      \n      rect.setAttribute('fill', fillColor);\n      rect.setAttribute('stroke', isHighlighted ? '#3498db' : '#ddd'); // Blue for highlight\n      rect.setAttribute('stroke-width', isHighlighted ? '1.5' : '1');\n      \n      // Make nodes interactive\n      nodeGroup.style.cursor = 'pointer';\n      \n      // 노드 클릭을 위한 데이터 속성 추가\n      nodeGroup.setAttribute('data-action', 'select-node');\n      \n      // Toggle expansion only for nodes with children\n      if (node.children && node.children.length > 0) {\n        const indicator = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        indicator.textContent = node.isExpanded ? '−' : '+';\n        indicator.setAttribute('x', width - 15);\n        indicator.setAttribute('y', NODE_HEIGHT / 2 + 4);\n        indicator.setAttribute('font-size', '13px');\n        indicator.setAttribute('font-weight', 'bold');\n        indicator.setAttribute('fill', '#888');\n        indicator.setAttribute('class', 'expand-indicator');\n        indicator.setAttribute('data-action', 'expand');\n        indicator.setAttribute('data-node-id', node.id);\n        \n        nodeGroup.appendChild(indicator);\n      }\n      \n      // Add X button for ignoring nodes\n      // background circle\n      const ignoreButtonBg = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n      ignoreButtonBg.setAttribute('cx', width - 35);\n      ignoreButtonBg.setAttribute('cy', NODE_HEIGHT / 2);\n      ignoreButtonBg.setAttribute('r', 8);\n      ignoreButtonBg.setAttribute('fill', '#f5f5f5');\n      ignoreButtonBg.setAttribute('stroke', '#ddd');\n      ignoreButtonBg.setAttribute('stroke-width', '1');\n      ignoreButtonBg.setAttribute('class', 'ignore-button-bg');\n      ignoreButtonBg.setAttribute('data-action', 'ignore');\n      ignoreButtonBg.setAttribute('data-node-id', node.id);\n      ignoreButtonBg.style.cursor = 'pointer';\n      \n      // X mark\n      const ignoreButton = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      ignoreButton.textContent = '✕';\n      ignoreButton.setAttribute('x', width - 35);\n      ignoreButton.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      ignoreButton.setAttribute('font-size', '11px');\n      ignoreButton.setAttribute('text-anchor', 'middle');\n      ignoreButton.setAttribute('fill', '#999');\n      ignoreButton.setAttribute('class', 'ignore-button');\n      ignoreButton.setAttribute('data-action', 'ignore');\n      ignoreButton.setAttribute('data-node-id', node.id);\n      ignoreButton.style.cursor = 'pointer';\n      \n      // Node label\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('x', 8);\n      text.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      text.setAttribute('font-size', node.level === 0 ? '13px' : '12px');\n      text.setAttribute('font-weight', node.level === 0 ? 'bold' : 'normal');\n      text.setAttribute('fill', '#333');\n      text.setAttribute('class', 'node-text');\n      \n      // Make sure text fits\n      const maxTextWidth = width - 60;\n      let displayText = node.name;\n      \n      if (displayText.length > 25) {\n        displayText = displayText.substring(0, 23) + '...';\n      }\n      \n      text.textContent = displayText;\n      \n      // Support count\n      const supportText = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      supportText.setAttribute('x', width - 55);\n      supportText.setAttribute('y', NODE_HEIGHT / 2 + 4);\n      supportText.setAttribute('font-size', '12px');\n      supportText.setAttribute('text-anchor', 'end');\n      supportText.setAttribute('fill', '#555');\n      supportText.setAttribute('font-weight', node.level === 0 ? 'bold' : 'normal');\n      supportText.setAttribute('class', 'support-text');\n      supportText.textContent = node.support;\n      \n      nodeGroup.appendChild(rect);\n      nodeGroup.appendChild(ignoreButtonBg);\n      nodeGroup.appendChild(ignoreButton);\n      nodeGroup.appendChild(text);\n      nodeGroup.appendChild(supportText);\n      container.appendChild(nodeGroup);\n      \n      // Hover effect for highlighting patterns\n      nodeGroup.addEventListener('mouseenter', () => {\n        // Find all ancestors and highlight the path\n        const pattern = [node.id];\n        let currentNode = node;\n        \n        while (currentNode.parent) {\n          pattern.push(currentNode.parent);\n          currentNode = treeNodes.find(n => n.id === currentNode.parent);\n          if (!currentNode) break;\n        }\n        \n        setHighlightedPattern(pattern);\n        \n        // Extract only the item names (not the full IDs) for the path display\n        const simplifiedPath = [];\n        pattern.forEach(id => {\n          const parts = id.split('-');\n          const lastPart = parts[parts.length - 1];\n          simplifiedPath.unshift(lastPart);\n        });\n        \n        setCurrentPath(simplifiedPath);\n      });\n      \n      nodeGroup.addEventListener('mouseleave', () => {\n        setHighlightedPattern(null);\n        // Don't clear current path - keep it visible\n      });\n    });\n    \n    // 전체 SVG에 이벤트 리스너 추가 (이벤트 위임)\n    svg.addEventListener('click', handleSvgClick);\n  };\n  \n  // SVG 클릭 이벤트 핸들러 (이벤트 위임)\n  const handleSvgClick = (e) => {\n    const target = e.target;\n    const action = target.getAttribute('data-action') || \n                  (target.parentNode ? target.parentNode.getAttribute('data-action') : null);\n    const nodeId = target.getAttribute('data-node-id') || \n                  (target.parentNode ? target.parentNode.getAttribute('data-node-id') : null);\n    \n    console.log('SVG click:', action, nodeId, target.tagName);\n    \n    if (!action || !nodeId) return;\n    \n    if (action === 'ignore') {\n      console.log('Ignoring node from event delegation:', nodeId);\n      e.stopPropagation();\n      ignoreNode(nodeId);\n    } \n    else if (action === 'expand') {\n      console.log('Expanding node from event delegation:', nodeId);\n      e.stopPropagation();\n      toggleNode(nodeId);\n    }\n    else if (action === 'select-node') {\n      console.log('Selecting node from event delegation:', nodeId);\n      // Find the node in our data\n      const findNode = (nodes, id) => {\n        for (const node of nodes) {\n          if (node.id === id) return node;\n          if (node.children && node.children.length > 0) {\n            const found = findNode(node.children, id);\n            if (found) return found;\n          }\n        }\n        return null;\n      };\n      \n      const selectedNode = findNode(miningData, nodeId);\n      if (selectedNode) {\n        sendPatternToAPI(selectedNode);\n      }\n    }\n  };\n  \n  // 컴포넌트 unmount 시 이벤트 리스너 제거\n  useEffect(() => {\n    return () => {\n      if (svgRef.current) {\n        svgRef.current.removeEventListener('click', handleSvgClick);\n      }\n    };\n  }, []);\n\n  // Function to generate mining data using Eclat or FP Growth algorithm\n  const generateMiningData = (combinationData, algo = 'eclat') => {\n    if (!combinationData || combinationData.length === 0) {\n      setMiningData(null);\n      return;\n    }\n\n    // Step 1: Create transactions from header combinations\n    const transactions = combinationData\n      .filter(item => item.header_group)\n      .map(item => item.header_group.split('|'));\n\n    // Step 2: Count item frequencies for both algorithms\n    const itemCounts = {};\n    const totalTransactions = transactions.length;\n    \n    transactions.forEach(transaction => {\n      transaction.forEach(item => {\n        itemCounts[item] = (itemCounts[item] || 0) + 1;\n      });\n    });\n\n    // Calculate minimum support threshold - use absolute minimum of 2\n    const minSupportCount = Math.max(2, Math.floor(totalTransactions * minSupport));\n    \n    // Get frequent items sorted by frequency\n    const frequentItems = Object.keys(itemCounts)\n      .filter(item => itemCounts[item] >= minSupportCount)\n      .sort((a, b) => itemCounts[b] - itemCounts[a]);\n\n    // Create single tree structure with most frequent item as root\n    if (frequentItems.length === 0) {\n      setMiningData([]);\n      return;\n    }\n    \n    // Build a single hierarchical tree structure instead of multiple independent trees\n    if (algo === 'eclat') {\n      // ECLAT ALGORITHM IMPLEMENTATION\n      \n      // Step 1: Build vertical tid-lists (transaction ID lists) for each item\n      const tidLists = {};\n      frequentItems.forEach(item => {\n        tidLists[item] = new Set();\n      });\n      \n      transactions.forEach((transaction, tid) => {\n        transaction.forEach(item => {\n          if (frequentItems.includes(item)) {\n            tidLists[item].add(tid);\n          }\n        });\n      });\n      \n      // Create a single root node representing the most frequent item\n      const rootItem = frequentItems[0];\n      const rootSupport = tidLists[rootItem].size;\n      \n      const singleTreeRoot = {\n        id: rootItem,\n        name: rootItem,\n        support: rootSupport,\n        confidence: rootSupport / totalTransactions,\n        children: []\n      };\n      \n      // Build a tree structure following the frequency order of items\n      const buildOrderedTree = (currentNode, currentPrefix, currentTids, level) => {\n        if (level >= maxDepth) return;\n        \n        // Find index of the current node's item in the frequentItems list\n        const currentItemIndex = frequentItems.indexOf(currentNode.name);\n        \n        // Check for next items in the frequency order\n        for (let i = currentItemIndex + 1; i < frequentItems.length; i++) {\n          const nextItem = frequentItems[i];\n          const nextItemTids = tidLists[nextItem];\n          \n          // Calculate intersection\n          const intersection = new Set([...currentTids].filter(tid => nextItemTids.has(tid)));\n          const support = intersection.size;\n          \n          // Add to tree if support is sufficient\n          if (support >= Math.max(2, minSupportCount)) {\n            const newPrefix = [...currentPrefix, nextItem];\n            const confidence = support / currentTids.size;\n            \n            // Add only if confidence is sufficient (reduced for deeper patterns)\n            if (confidence >= (level > 2 ? minConfidence/2 : minConfidence)) {\n              const childNode = {\n                id: `${currentNode.id}-${nextItem}`,\n                name: nextItem,\n                support: support,\n                confidence: confidence,\n                children: []\n              };\n              \n              currentNode.children.push(childNode);\n              \n              // Recursively build tree with this child as new parent\n              buildOrderedTree(childNode, newPrefix, intersection, level + 1);\n            }\n          }\n        }\n      };\n      \n      // Start building the tree from the root\n      buildOrderedTree(singleTreeRoot, [rootItem], tidLists[rootItem], 1);\n      \n      // Initialize expanded nodes for visualization\n      const initialExpanded = {};\n      initialExpanded[rootItem] = true; // Expand root node\n      \n      // Expand first level children\n      if (singleTreeRoot.children && singleTreeRoot.children.length > 0) {\n        singleTreeRoot.children.slice(0, 5).forEach(child => {\n          initialExpanded[child.id] = true;\n          \n          // Also expand first grandchild if available\n          if (child.children && child.children.length > 0) {\n            initialExpanded[child.children[0].id] = true;\n          }\n        });\n      }\n      \n      // Set the result as a single-item array containing the root\n      setMiningData([singleTreeRoot]);\n      setExpandedNodes(initialExpanded);\n      \n    } else {\n      // FP-GROWTH for a single hierarchical tree\n      \n      // Step 3: Reorder transactions based on frequency\n      const orderedTransactions = transactions.map(transaction => {\n        return transaction\n          .filter(item => frequentItems.includes(item))\n          .sort((a, b) => itemCounts[b] - itemCounts[a]);\n      }).filter(transaction => transaction.length > 0);\n      \n      // Create a single root node for the most frequent item\n      const rootItem = frequentItems[0];\n      \n      const singleTreeRoot = {\n        id: rootItem,\n        name: rootItem,\n        support: itemCounts[rootItem],\n        confidence: itemCounts[rootItem] / totalTransactions,\n        children: []\n      };\n      \n      // Create a mapping of patterns to their support count\n      const patternSupports = {};\n      \n      // First pass - gather all pattern supports\n      orderedTransactions.forEach(transaction => {\n        if (transaction.length < 2) return;\n        \n        for (let i = 0; i < transaction.length; i++) {\n          for (let j = i + 1; j < transaction.length; j++) {\n            const pattern = [transaction[i], transaction[j]];\n            const key = pattern.join('-');\n            patternSupports[key] = (patternSupports[key] || 0) + 1;\n          }\n        }\n      });\n      \n      // Then build tree with those precomputed pattern supports\n      const buildOrderedFPTree = (currentNode, level) => {\n        if (level >= maxDepth) return;\n        \n        const currentItemIndex = frequentItems.indexOf(currentNode.name);\n        \n        for (let i = currentItemIndex + 1; i < frequentItems.length; i++) {\n          const nextItem = frequentItems[i];\n          \n          // Check if the pair meets minimum support\n          const patternKey = [currentNode.name, nextItem].join('-');\n          const support = patternSupports[patternKey] || 0;\n          \n          if (support >= Math.max(2, minSupportCount)) {\n            const confidence = support / itemCounts[currentNode.name];\n            \n            if (confidence >= (level > 2 ? minConfidence/2 : minConfidence)) {\n              const childNode = {\n                id: `${currentNode.id}-${nextItem}`,\n                name: nextItem,\n                support: support,\n                confidence: confidence,\n                children: []\n              };\n              \n              currentNode.children.push(childNode);\n              buildOrderedFPTree(childNode, level + 1);\n            }\n          }\n        }\n      };\n      \n      // Start building the tree from the root\n      buildOrderedFPTree(singleTreeRoot, 1);\n      \n      // Initialize expanded nodes for visualization\n      const initialExpanded = {};\n      initialExpanded[rootItem] = true; // Expand root node\n      \n      // Expand first level children\n      if (singleTreeRoot.children && singleTreeRoot.children.length > 0) {\n        singleTreeRoot.children.slice(0, 5).forEach(child => {\n          initialExpanded[child.id] = true;\n          \n          // Also expand first grandchild if available\n          if (child.children && child.children.length > 0) {\n            initialExpanded[child.children[0].id] = true;\n          }\n        });\n      }\n      \n      // Set the result as a single-item array containing the root\n      setMiningData([singleTreeRoot]);\n      setExpandedNodes(initialExpanded);\n    }\n  };\n\n  // Switch between algorithms\n  const switchAlgorithm = (algo) => {\n    setAlgorithm(algo);\n  };\n  \n  // Change minimum support threshold\n  const handleSupportChange = (e) => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > 0 && value <= 1) {\n      setMinSupport(value);\n    }\n  };\n  \n  // Change minimum confidence threshold\n  const handleConfidenceChange = (e) => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > 0 && value <= 1) {\n      setMinConfidence(value);\n    }\n  };\n  \n  // Change maximum depth\n  const handleDepthChange = (e) => {\n    const value = parseInt(e.target.value);\n    if (!isNaN(value) && value > 0) {\n      setMaxDepth(value);\n    }\n  };\n\n  // Function to toggle node expansion\n  const toggleNode = (nodeId) => {\n    setExpandedNodes(prev => ({\n      ...prev,\n      [nodeId]: !prev[nodeId]\n    }));\n  };\n\n  // Toggle settings panel\n  const toggleSettings = () => {\n    setShowSettings(prev => !prev);\n  };\n\n  // Setup initial path on first render\n  useEffect(() => {\n    if (miningData && miningData.length > 0) {\n      // Set initial path to root node\n      const rootItem = miningData[0].name;\n      setCurrentPath([rootItem]);\n    }\n  }, [miningData]);\n\n  // Function to ignore a node\n  const ignoreNode = (nodeId) => {\n    if (!nodeId) {\n      console.warn('ignoreNode: nodeId is undefined');\n      return;\n    }\n    \n    console.log('Ignoring node:', nodeId);\n    \n    // 배열로 상태 업데이트 - React가 확실히 변경을 감지\n    setIgnoredNodes(prev => {\n      if (prev.includes(nodeId)) {\n        return prev; // 이미 무시 중이면 변경하지 않음\n      }\n      \n      const newIgnored = [...prev, nodeId]; // 새 배열 생성\n      console.log('New ignored nodes:', newIgnored);\n      \n      // 피드백 표시\n      const parts = nodeId.split('-');\n      const nodeName = parts[parts.length - 1];\n      showNotification(`'${nodeName}' 노드가 무시됨`, 'ignore');\n      \n      return newIgnored;\n    });\n  };\n  \n  // 알림 표시 함수\n  const showNotification = (message, type = 'normal') => {\n    // 이전 알림 제거\n    const existingNotifications = document.querySelectorAll('.pattern-notification');\n    existingNotifications.forEach(n => {\n      if (n.parentNode) {\n        n.parentNode.removeChild(n);\n      }\n    });\n    \n    // 새 알림 생성\n    const notification = document.createElement('div');\n    notification.className = `pattern-notification ${type === 'ignore' ? 'ignore-notification' : ''}`;\n    notification.textContent = message;\n    document.body.appendChild(notification);\n    \n    setTimeout(() => {\n      notification.style.opacity = '0';\n      setTimeout(() => {\n        if (notification.parentNode) {\n          document.body.removeChild(notification);\n        }\n      }, 300);\n    }, 2000);\n  };\n  \n  // Function to send pattern to API\n  const sendPatternToAPI = (node) => {\n    console.log('sendPatternToAPI called with node:', node);\n    \n    if (!node || !node.id) {\n      console.warn('Invalid node:', node);\n      return;\n    }\n    \n    // 콜백 함수 확인\n    if (typeof onPatternSelect !== 'function') {\n      console.warn('onPatternSelect is not a function:', onPatternSelect);\n      showNotification('패턴 선택 핸들러가 없습니다', 'ignore');\n      return;\n    }\n    \n    // Get full pattern from node to root\n    const getFullPattern = (nodeId) => {\n      const parts = nodeId.split('-');\n      return parts.filter(part => !ignoredNodes.includes(part));\n    };\n    \n    // Get full pattern without ignored nodes\n    const pattern = getFullPattern(node.id);\n    \n    // Join with delimiter\n    const patternString = pattern.join('|');\n    \n    console.log('Pattern to send:', patternString);\n    \n    // 패턴이 비어있는지 확인\n    if (!patternString) {\n      console.warn('Pattern is empty after filtering ignored nodes');\n      showNotification('선택한 패턴이 비어 있습니다', 'ignore');\n      return;\n    }\n    \n    // 패턴 전송\n    try {\n      onPatternSelect(patternString);\n      console.log('Pattern sent successfully:', patternString);\n      showNotification(`패턴 선택됨: ${patternString}`);\n    } catch (error) {\n      console.error('Error sending pattern:', error);\n      showNotification('패턴 전송 중 오류 발생', 'ignore');\n    }\n  };\n\n  return (\n    <div className=\"tab-content\">\n      {loading ? (\n        <div className=\"loading\">로딩 중...</div>\n      ) : error ? (\n        <div className=\"error\">에러: {error}</div>\n      ) : combinationHeaders && combinationHeaders.length > 0 ? (\n        <div className=\"mining-view\">\n          <div className=\"mining-header\">\n            <div className=\"current-path\">\n              {currentPath.map((item, index) => (\n                <span key={item + index}>\n                  {index > 0 && <span className=\"path-separator\">→</span>}\n                  <span className={index === 0 ? \"path-root\" : \"\"}>{item}</span>\n                </span>\n              ))}\n            </div>\n            <div className=\"header-actions\">\n              {ignoredNodes.length > 0 && (\n                <button \n                  className=\"reset-button\" \n                  onClick={() => {\n                    console.log('Reset ignored nodes');\n                    setIgnoredNodes([]);\n                    showNotification('무시된 노드를 모두 초기화했습니다');\n                  }}\n                >\n                  무시 초기화 ({ignoredNodes.length})\n                </button>\n              )}\n              <button className=\"settings-button\" onClick={toggleSettings}>\n                ⚙️\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"mining-tree-container\">\n            <svg \n              className=\"mining-tree-svg\" \n              ref={svgRef} \n              width=\"100%\" \n              height=\"500\"\n            ></svg>\n          </div>\n          \n          {showSettings && (\n            <div className=\"settings-panel\">\n              <div className=\"settings-header\">\n                <h3>패턴 설정</h3>\n                <button className=\"close-button\" onClick={toggleSettings}>×</button>\n              </div>\n              <div className=\"settings-content\">\n                <div className=\"threshold-item\">\n                  <div className=\"threshold-label\">{(minSupport * 100).toFixed(0)}%</div>\n                  <input \n                    type=\"range\" \n                    min=\"0.01\" \n                    max=\"0.5\" \n                    step=\"0.01\" \n                    value={minSupport}\n                    onChange={handleSupportChange}\n                  />\n                  <div className=\"threshold-name\">최소 지지도</div>\n                </div>\n                <div className=\"threshold-item\">\n                  <div className=\"threshold-label\">{(minConfidence * 100).toFixed(0)}%</div>\n                  <input \n                    type=\"range\" \n                    min=\"0.01\" \n                    max=\"0.9\" \n                    step=\"0.01\" \n                    value={minConfidence}\n                    onChange={handleConfidenceChange}\n                  />\n                  <div className=\"threshold-name\">최소 신뢰도</div>\n                </div>\n                <div className=\"threshold-item\">\n                  <div className=\"threshold-label\">{maxDepth}</div>\n                  <input \n                    type=\"range\" \n                    min=\"3\" \n                    max=\"100\" \n                    step=\"1\" \n                    value={maxDepth}\n                    onChange={handleDepthChange}\n                  />\n                  <div className=\"threshold-name\">최대 패턴 깊이</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"column-empty\">\n          {testMode \n            ? \"마이닝 데이터를 로딩 중입니다...\" \n            : \"채널과 헤더를 선택하면 마이닝 결과가 표시됩니다.\"}\n        </div>\n      )}\n\n      <style jsx>{`\n        .mining-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          position: relative;\n        }\n        \n        .mining-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 8px 10px;\n          background-color: #ffffff;\n          border-bottom: 1px solid #eee;\n          z-index: 2;\n          position: sticky;\n          top: 0;\n        }\n        \n        .current-path {\n          font-size: 13px;\n          color: #555;\n          flex-grow: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .path-separator {\n          margin: 0 6px;\n          color: #999;\n        }\n        \n        .path-root {\n          font-weight: bold;\n        }\n        \n        .header-actions {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .reset-button {\n          background: #f5f5f5;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          padding: 3px 8px;\n          font-size: 11px;\n          cursor: pointer;\n          color: #666;\n        }\n        \n        .reset-button:hover {\n          background: #eee;\n        }\n        \n        .settings-button {\n          background: none;\n          border: none;\n          font-size: 16px;\n          cursor: pointer;\n          padding: 4px 8px;\n          border-radius: 4px;\n          transition: background-color 0.2s;\n        }\n        \n        .settings-button:hover {\n          background-color: #f5f5f5;\n        }\n        \n        .mining-tree-container {\n          flex-grow: 1;\n          overflow: auto;\n          background-color: #ffffff;\n          padding: 0;\n          border: 1px solid #e0e0e0;\n          border-top: none;\n        }\n        \n        .settings-panel {\n          position: absolute;\n          top: 45px;\n          right: 10px;\n          width: 280px;\n          background: white;\n          border-radius: 6px;\n          box-shadow: 0 3px 10px rgba(0,0,0,0.15);\n          z-index: 10;\n          overflow: hidden;\n        }\n        \n        .settings-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 10px 15px;\n          background: #f8f9fa;\n          border-bottom: 1px solid #eee;\n        }\n        \n        .settings-header h3 {\n          margin: 0;\n          font-size: 14px;\n          color: #333;\n        }\n        \n        .close-button {\n          background: none;\n          border: none;\n          font-size: 18px;\n          cursor: pointer;\n          color: #666;\n        }\n        \n        .settings-content {\n          padding: 15px;\n        }\n        \n        .threshold-item {\n          margin-bottom: 15px;\n        }\n        \n        .threshold-label {\n          font-size: 13px;\n          font-weight: bold;\n          color: #333;\n          margin-bottom: 4px;\n          text-align: right;\n        }\n        \n        .threshold-name {\n          font-size: 12px;\n          color: #666;\n          margin-top: 2px;\n        }\n        \n        .threshold-item input {\n          width: 100%;\n        }\n        \n        .pattern-notification {\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          background: rgba(52, 152, 219, 0.9);\n          color: white;\n          padding: 10px 15px;\n          border-radius: 4px;\n          font-size: 12px;\n          z-index: 1000;\n          transition: opacity 0.3s;\n          opacity: 1;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n        }\n        \n        .ignore-notification {\n          background: rgba(231, 76, 60, 0.9);\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default MiningView; "],"mappings":"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AC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,gBAENzM,OAAA;MAAK+L,SAAS,EAAC,cAAc;MAAA7H,QAAA,EAC1B7D,QAAQ,GACL,qBAAqB,GACrB;IAA6B;MAAAiM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9B,CACN,eAEDzM,OAAA;MAAOiN,GAAG;MAAA/I,QAAA,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAoI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV,CAAC;AAAClM,EAAA,CA39BIN,UAAU;AAAAiN,EAAA,GAAVjN,UAAU;AA69BhB,eAAeA,UAAU;AAAC,IAAAiN,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}